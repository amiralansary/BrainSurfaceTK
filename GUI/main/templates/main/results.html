{% extends 'main/header.html' %}
{% load static %}

{% block title %}Results{% endblock %}

{% block content %}
    <style>
        #brain_surf_container {
            position: relative !important;
            width: 100% !important;
            height: 50% !important;
        }

        .GeometryViewer-module-selector_2T5dG {
            display: initial;
        }
    </style>

    <h1>Session-{{ session_id }}</h1>
    <div id="brain-container">

        {% if mri_js_html is not None %}
            <div class="brain_slice_container">
                {{ mri_js_html | safe }}
            </div>
        {% endif %}

        {% if surf_file_path is not None %}
            <div id="brain_surf_container">
                <div class="GeometryViewer-module-fullScreen_38Xg_"></div>
            </div>
            <script id="brain_surf" data-fileURL="{% static surf_file_path | safe %}"
                    type="text/javascript" src="{% static "main/js/MyWebApp.js" | safe %}"></script>
        {% endif %}

    </div>
    <table>
        {% for table_names, table_values in table_contents %}
            <thead>
            {% for table_name in table_names %}
                <th>
                    {{ table_name }}
                </th>
            {% endfor %}
            </thead>
            <tbody>
            {% for value in table_values %}
            <td>{{ value }}</td>
            {% endfor %}
            </tbody>
        {% endfor %}
    </table>

    <div id="prediction_container">
        <button id="predict" type="submit" formmethod="get">Predict</button>
        {% if pred is not None %}
            Prediction be printed here
        {% endif %}
    </div>

    <!--    <div id="button_container">-->
    <!--        <button class="waves-effect waves-light btn-small" , type="submit" , id="predict" name="predict" , value="-", onclick="get_pred()">Predict-->
    <!--        </button>-->

    <!--    </div>-->

    <!--    <script>-->

    <!--        function get_pred() {-->

    <!--            var table_Exists = document.getElementById("result_table");-->

    <!--            if (table_Exists == null)-->
    <!--            {-->
    <!--                // CREATE DYNAMIC TABLE.-->
    <!--                var table = document.createElement('table');-->

    <!--                // SET THE TABLE ID.-->
    <!--                // WE WOULD NEED THE ID TO TRAVERSE AND EXTRACT DATA FROM THE TABLE.-->
    <!--                table.setAttribute('id', 'result_table');-->

    <!--                var arrHead = new Array();-->
    <!--                arrHead = ['Predicted age'];-->

    <!--                var arrValue = new Array();-->
    <!--                arrValue.push([{{ pred }}]);-->

    <!--                var tr = table.insertRow(-1);-->

    <!--                for (var h = 0; h < arrHead.length; h++) {-->
    <!--                    var th = document.createElement('th');              // TABLE HEADER.-->
    <!--                    th.innerHTML = arrHead[h];-->
    <!--                    tr.appendChild(th);-->
    <!--                }-->

    <!--                for (var c = 0; c <= arrValue.length - 1; c++) {-->
    <!--                    tr = table.insertRow(-1);-->

    <!--                    for (var j = 0; j < arrHead.length; j++) {-->
    <!--                        var td = document.createElement('td');          // TABLE DEFINITION.-->
    <!--                        td = tr.insertCell(-1);-->
    <!--                        td.innerHTML = arrValue[c][j];                  // ADD VALUES TO EACH CELL.-->
    <!--                    }-->
    <!--                }-->

    <!--                // FINALLY ADD THE NEWLY CREATED TABLE AND BUTTON TO THE BODY.-->
    <!--                document.getElementById("button_container").appendChild(table);-->
    <!--            }-->
    <!--        }-->

    <!--    </script>-->



{% endblock %}